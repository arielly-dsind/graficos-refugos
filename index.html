<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Gr√°ficos de Refugo</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h2>Refugos por Motivo</h2>
<canvas id="graficoRefugo"></canvas>

<script>
fetch('refugos.csv')
    .then(res => res.text())
    .then(csv => {
        const linhas = csv.split('\n').slice(1);

        const totais = {};

        linhas.forEach(linha => {
            const colunas = linha.split(',');

            const quantidade = Number(colunas[6]); // Quantidade
            const nomeRefugo = colunas[8];          // Nome Refugo

            if (!nomeRefugo || isNaN(quantidade)) return;

            if (!totais[nomeRefugo]) {
                totais[nomeRefugo] = 0;
            }

            totais[nomeRefugo] += quantidade;
        });

        const labels = Object.keys(totais);
        const valores = Object.values(totais);

        new Chart(document.getElementById('graficoRefugo'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Quantidade',
                    data: valores
                }]
            }
        });
    });
</script>

</body>
</html>
